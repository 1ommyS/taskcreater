<?phpnamespace App\libs;use App\Models\User;use Exception;class Sms{    private string $login = 'itpark32';    private string $password = 'itpark32ru';    public function sendMessageToStudents (string $message, $users)    {        $students_success = [];        $students_failed = [];        foreach ( $users as $u ) {            $userObject = User::where("id", $u)->first();            $message = str_replace(" ", "%20", $message);            try {                $res = json_decode(file_get_contents("https://smsc.ru/sys/send.php?login={$this->login}&psw={$this->password}&phones={$userObject->phone_student}&mes={$message}"));                if ( !empty($res['error']) ) echo "<h2>Маленький баланс для отправки сообщения <h2><br>";                $students_success[] = $userObject->name;            } catch ( Exception $e ) {                $students_failed[] = $userObject->name;            }        }        return [            'success' => $students_success,            'failed' => $students_failed,        ];    }    public function sendMessageToParents (string $message, $users)    {        $students_success = [];        $students_failed = [];        foreach ( $users as $u ) {            $phoneNumber = User::where("id", $u)->first();            $message = str_replace(" ", "%20", $message);            try {                $res = json_decode(file_get_contents("https://smsc.ru/sys/send.php?login={$this->login}&psw={$this->password}&phones={$phoneNumber->phone_parent}&mes={$message}"));                if ( !empty($res['error']) ) echo "<h2>Маленький баланс для отправки сообщения <h2><br>";                $students_success[] = $phoneNumber->name_student;            } catch ( Exception $e ) {                $students_failed[] = $phoneNumber->name_student;            }        }        return [            'success' => $students_success,            'failed' => $students_failed,        ];    }}